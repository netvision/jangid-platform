import{Y as o,j as n,Z as r,a0 as c}from"#entry";const h=o(async t=>{let a,s;const e=n();if(!e.accessToken||!e.refreshToken)return r({path:"/auth/login",query:{redirect:t.fullPath}});if(!e.user)try{[a,s]=c(()=>e.fetchCurrentUser()),await a,s()}catch(u){return console.warn("failed to fetch user",u),r({path:"/auth/login",query:{redirect:t.fullPath}})}if(e.user?.role!=="SUPER_ADMIN")return r("/dashboard")});export{h as default};
